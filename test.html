<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  
</body>
<script>
"use strict";
// 博客内容
var blogItem = function (title, content, author) {
  if (title) {
    this.title = title
    this.content = content
    var createTime = new Date().getDate()
    this.createTime = createTime
    this.author = author
  } else {
    throw new Error("blog title empty key")
  }
}

// stringify挂载在原型链
blogItem.prototype = {
  toString: function () {
    return JSON.stringify(this)
  }
}
// 去掉字符串两端空白
String.prototype.trim=function(){
　return this.replace(/(^\s*)|(\s*$)/g, "");
}
// 储存方法
var Blog = {}

Blog.constructor = {
  init: function () {
      // todo
  },
  // FIXME: save在index.html调用没有传参数，这些参数怎么来？
  save: function (title, content) {
    console.log(title, content)
      title = title.trim();
      content = content.trim();
      if (title === "" || content === ""){
          throw new Error("empty key / value");
      }
      if (content.length > 64 || title.length > 64){
          throw new Error("key / value exceed limit length")
      }
      console.log (from)
      var from = Blockchain.transaction.from;
      // var blogItemval = this.data.get(title);
      // if (blogItemval){
      //     throw new Error("content has been occupied");
      // }
      var blogItemchild = new blogItem(title, content, from);
      console.log(blogItemchild)
      this.data.put(title, blogItemchild);
  },

  get: function (key) {
      key = key.trim();
      if ( key === "" ) {
          throw new Error("empty key")
      }
      return this.data.get(key);
  }
};
console.log(Blog)
console.log(Blog.save("xxx","hhhhhhhhh"))
</script>
</html>